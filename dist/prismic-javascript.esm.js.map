{"version":3,"file":"prismic-javascript.esm.js","sources":["../src/experiments.ts","../src/form.ts","../src/Predicates.ts","../src/Cookies.ts","../src/ResolvedApi.ts","../src/Experiments.ts","../src/lru.ts","../src/cache.ts","../src/request.ts","../src/HttpClient.ts","../src/Api.ts","../src/client.ts","../src/index.ts"],"sourcesContent":["export class Variation {\n  data: any = {};\n\n  constructor(data: any) {\n    this.data = data;\n  }\n\n  id(): string {\n    return this.data.id;\n  }\n\n  ref(): string {\n    return this.data.ref;\n  }\n\n  label(): string {\n    return this.data.label;\n  }\n}\n\nexport class Experiment {\n  variations: Variation[];\n  data: any = {};\n\n  constructor(data: any) {\n    this.data = data;\n    this.variations = (data.variations || []).map((v: any) => {\n      return new Variation(v);\n    });\n  }\n\n  id(): string {\n    return this.data.id;\n  }\n\n  googleId(): string {\n    return this.data.googleId;\n  }\n\n  name(): string {\n    return this.data.name;\n  }\n}\n\nexport class Experiments {\n  drafts: Experiment[];\n  running: Experiment[];\n\n  constructor(data: any) {\n    if (data) {\n      this.drafts = (data.drafts || []).map((exp: any) => {\n        return new Experiment(exp);\n      });\n      this.running = (data.running || []).map((exp: any) => {\n        return new Experiment(exp);\n      });\n    }\n  }\n\n  current(): Experiment | null {\n    if (this.running.length > 0) {\n      return this.running[0];\n    } else {\n      return null;\n    }\n  }\n  refFromCookie(cookie: string): string | null {\n    if (!cookie || cookie.trim() === '') return null;\n    const splitted = cookie.trim().split(' ');\n    if (splitted.length < 2) return null;\n    const expId = splitted[0];\n    const varIndex = parseInt(splitted[1], 10);\n    const exp = this.running.filter((exp) => {\n      return exp.googleId() === expId && exp.variations.length > varIndex;\n    })[0];\n    return exp ? exp.variations[varIndex].ref() : null;\n  }\n}\n","import Api from './Api';\nimport ResolvedApi from './ResolvedApi';\nimport ApiSearchResponse from './ApiSearchResponse';\nimport HttpClient from './HttpClient';\nimport { RequestCallback } from './request';\n\nexport type Fields = { [key: string]: any };\n\nexport interface Form {\n  fields: Fields;\n  action: string;\n  name: string;\n  rel: string;\n  form_method: string;\n  enctype: string;\n}\n\nexport class LazySearchForm {\n  id: string;\n  fields: Fields;\n  api: Api;\n\n  constructor(id: string, api: Api) {\n    this.id = id;\n    this.api = api;\n    this.fields = {};\n  }\n\n  set(key: string, value: any): LazySearchForm {\n    this.fields[key] = value;\n    return this;\n  }\n\n  ref(ref: string): LazySearchForm {\n    return this.set('ref', ref);\n  }\n\n  query(query: string | string[]): LazySearchForm {\n    return this.set('q', query);\n  }\n\n  pageSize(size: number): LazySearchForm {\n    return this.set('pageSize', size);\n  }\n\n  fetch(fields: string | string[]): LazySearchForm {\n    return this.set('fetch', fields);\n  }\n\n  fetchLinks(fields: string | string[]): LazySearchForm {\n    return this.set('fetchLinks', fields);\n  }\n\n  lang(langCode: string): LazySearchForm {\n    return this.set('lang', langCode);\n  }\n\n  page(p: number): LazySearchForm {\n    return this.set('page', p);\n  }\n\n  after(documentId: string): LazySearchForm {\n    return this.set('after', documentId);\n  }\n\n  orderings(orderings?: string[]): LazySearchForm {\n    return this.set('orderings', orderings);\n  }\n\n  url(): Promise<string> {\n    return this.api.get().then((api) => {\n      return LazySearchForm.toSearchForm(this, api).url();\n    });\n  }\n\n  submit(cb: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.api.get().then((api) => {\n      return LazySearchForm.toSearchForm(this, api).submit(cb);\n    });\n  }\n\n  static toSearchForm(lazyForm: LazySearchForm, api: ResolvedApi): SearchForm {\n    const form = api.form(lazyForm.id);\n    if (form) {\n      return Object.keys(lazyForm.fields).reduce((form, fieldKey) => {\n        const fieldValue = lazyForm.fields[fieldKey];\n        if (fieldKey === 'q') {\n          return form.query(fieldValue);\n        } else if (fieldKey === 'pageSize') {\n          return form.pageSize(fieldValue);\n        } else if (fieldKey === 'fetch') {\n          return form.fetch(fieldValue);\n        } else if (fieldKey === 'fetchLinks') {\n          return form.fetchLinks(fieldValue);\n        } else if (fieldKey === 'lang') {\n          return form.lang(fieldValue);\n        } else if (fieldKey === 'page') {\n          return form.page(fieldValue);\n        } else if (fieldKey === 'after') {\n          return form.after(fieldValue);\n        } else if (fieldKey === 'orderings') {\n          return form.orderings(fieldValue);\n        } else {\n          return form.set(fieldKey, fieldValue);\n        }\n      }, form);\n    } else {\n      throw new Error(`Unable to access to form ${lazyForm.id}`);\n    }\n  }\n}\n\nexport class SearchForm {\n  httpClient: HttpClient;\n  form: Form;\n  data: any;\n\n  constructor(form: Form, httpClient: HttpClient) {\n    this.httpClient = httpClient;\n    this.form = form;\n\n    this.data = {};\n    for (const field in form.fields) {\n      if (form.fields[field]['default']) {\n        this.data[field] = [form.fields[field]['default']];\n      }\n    }\n  }\n\n  set(field: string, value: any): SearchForm {\n    const fieldDesc = this.form.fields[field];\n    if (!fieldDesc) throw new Error('Unknown field ' + field);\n    const checkedValue = value === '' || value === undefined ? null : value;\n    let values = this.data[field] || [];\n    if (fieldDesc.multiple) {\n      values = checkedValue ? values.concat([checkedValue]) : values;\n    } else {\n      values = checkedValue ? [checkedValue] : values;\n    }\n    this.data[field] = values;\n    return this;\n  }\n\n  /**\n   * Sets a ref to query on for this SearchForm. This is a mandatory\n   * method to call before calling submit(), and api.form('everything').submit()\n   * will not work.\n   */\n  ref(ref: string): SearchForm {\n    return this.set('ref', ref);\n  }\n\n  /**\n   * Sets a predicate-based query for this SearchForm. This is where you\n   * paste what you compose in your prismic.io API browser.\n   */\n  query(query: string | string[]): SearchForm {\n    if (typeof query === 'string') {\n      return this.query([query]);\n    } else if (query instanceof Array) {\n      return this.set('q', `[${query.join('')}]`);\n    } else {\n      throw new Error(`Invalid query : ${query}`);\n    }\n  }\n\n  /**\n   * Sets a page size to query for this SearchForm. This is an optional method.\n   *\n   * @param {number} size - The page size\n   * @returns {SearchForm} - The SearchForm itself\n   */\n  pageSize(size: number): SearchForm {\n    return this.set('pageSize', size);\n  }\n\n  /**\n   * Restrict the results document to the specified fields\n   */\n  fetch(fields: string | string[]): SearchForm {\n    const strFields = fields instanceof Array ? fields.join(',') : fields;\n    return this.set('fetch', strFields);\n  }\n\n  /**\n   * Include the requested fields in the DocumentLink instances in the result\n   */\n  fetchLinks(fields: string | string[]): SearchForm {\n    const strFields = fields instanceof Array ? fields.join(',') : fields;\n    return this.set('fetchLinks', strFields);\n  }\n\n  /**\n   * Sets the language to query for this SearchForm. This is an optional method.\n   */\n  lang(langCode: string): SearchForm {\n    return this.set('lang', langCode);\n  }\n\n  /**\n   * Sets the page number to query for this SearchForm. This is an optional method.\n   */\n  page(p: number): SearchForm {\n    return this.set('page', p);\n  }\n\n  /**\n   * Remove all the documents except for those after the specified document in the list. This is an optional method.\n   */\n  after(documentId: string): SearchForm {\n    return this.set('after', documentId);\n  }\n\n  /**\n   * Sets the orderings to query for this SearchForm. This is an optional method.\n   */\n  orderings(orderings ?: string[]): SearchForm {\n    if (!orderings) {\n      return this;\n    } else {\n      return this.set('orderings', `[${orderings.join(',')}]`);\n    }\n  }\n\n  /**\n   * Build the URL to query\n   */\n  url(): string {\n    let url = this.form.action;\n    if (this.data) {\n      let sep = (url.indexOf('?') > -1 ? '&' : '?');\n      for (const key in this.data) {\n        if  (this.data.hasOwnProperty(key)) {\n          const values = this.data[key];\n          if (values) {\n            for (let i = 0; i < values.length; i++) {\n              url += sep + key + '=' + encodeURIComponent(values[i]);\n              sep = '&';\n            }\n          }\n        }\n      }\n    }\n    return url;\n  }\n\n  /**\n   * Submits the query, and calls the callback function.\n   */\n  submit(cb: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.httpClient.cachedRequest<ApiSearchResponse>(this.url()).then((response) => {\n      cb && cb(null, response);\n      return response;\n    }).catch((error) => {\n      cb && cb(error);\n      throw error;\n    });\n  }\n}\n","const OPERATOR = {\n  at: 'at',\n  not: 'not',\n  missing: 'missing',\n  has: 'has',\n  any: 'any',\n  in: 'in',\n  fulltext: 'fulltext',\n  similar: 'similar',\n  numberGt: 'number.gt',\n  numberLt: 'number.lt',\n  numberInRange: 'number.inRange',\n  dateBefore: 'date.before',\n  dateAfter: 'date.after',\n  dateBetween: 'date.between',\n  dateDayOfMonth: 'date.day-of-month',\n  dateDayOfMonthAfter: 'date.day-of-month-after',\n  dateDayOfMonthBefore: 'date.day-of-month-before',\n  dateDayOfWeek: 'date.day-of-week',\n  dateDayOfWeekAfter: 'date.day-of-week-after',\n  dateDayOfWeekBefore: 'date.day-of-week-before',\n  dateMonth: 'date.month',\n  dateMonthBefore: 'date.month-before',\n  dateMonthAfter: 'date.month-after',\n  dateYear: 'date.year',\n  dateHour: 'date.hour',\n  dateHourBefore: 'date.hour-before',\n  dateHourAfter: 'date.hour-after',\n  GeopointNear: 'geopoint.near',\n};\n\ntype PredicateValue = string | number | Date;\n\nfunction encode(value: PredicateValue | PredicateValue[]): string {\n  if (typeof value === 'string') {\n    return `\"${value}\"`;\n  } else if (typeof value === 'number') {\n    return value.toString();\n  } else if (value instanceof Date) {\n    return value.getTime().toString();\n  } else if (value instanceof Array) {\n    return `[${value.map(v => encode(v)).join(',')}]`;\n  } else {\n    throw new Error(`Unable to encode ${value} of type ${typeof value}`);\n  }\n}\n\nconst geopoint = {\n  near(fragment: string, latitude: number, longitude: number, radius: number): string {\n    return `[${OPERATOR.GeopointNear}(${fragment}, ${latitude}, ${longitude}, ${radius})]`;\n  },\n};\n\nconst date = {\n\n  before(fragment: string, before: PredicateValue): string {\n    return `[${OPERATOR.dateBefore}(${fragment}, ${encode(before)})]`;\n  },\n\n  after(fragment: string, after: PredicateValue): string {\n    return `[${OPERATOR.dateAfter}(${fragment}, ${encode(after)})]`;\n  },\n\n  between(fragment: string, before: PredicateValue, after: PredicateValue): string {\n    return `[${OPERATOR.dateBetween}(${fragment}, ${encode(before)}, ${encode(after)})]`;\n  },\n\n  dayOfMonth(fragment: string, day: number): string {\n    return `[${OPERATOR.dateDayOfMonth}(${fragment}, ${day})]`;\n  },\n\n  dayOfMonthAfter(fragment: string, day: number): string {\n    return `[${OPERATOR.dateDayOfMonthAfter}(${fragment}, ${day})]`;\n  },\n\n  dayOfMonthBefore(fragment: string, day: number): string {\n    return `[${OPERATOR.dateDayOfMonthBefore}(${fragment}, ${day})]`;\n  },\n\n  dayOfWeek(fragment: string, day: number | string): string {\n    return `[${OPERATOR.dateDayOfWeek}(${fragment}, ${encode(day)})]`;\n  },\n\n  dayOfWeekAfter(fragment: string, day: number | string): string {\n    return `[${OPERATOR.dateDayOfWeekAfter}(${fragment}, ${encode(day)})]`;\n  },\n\n  dayOfWeekBefore(fragment: string, day: number | string): string {\n    return `[${OPERATOR.dateDayOfWeekBefore}(${fragment}, ${encode(day)})]`;\n  },\n\n  month(fragment: string, month: number | string): string {\n    return `[${OPERATOR.dateMonth}(${fragment}, ${encode(month)})]`;\n  },\n\n  monthBefore(fragment: string, month: number | string): string {\n    return `[${OPERATOR.dateMonthBefore}(${fragment}, ${encode(month)})]`;\n  },\n\n  monthAfter(fragment: string, month: number | string): string {\n    return `[${OPERATOR.dateMonthAfter}(${fragment}, ${encode(month)})]`;\n  },\n\n  year(fragment: string, year: number): string {\n    return `[${OPERATOR.dateYear}(${fragment}, ${year})]`;\n  },\n\n  hour(fragment: string, hour: number): string {\n    return `[${OPERATOR.dateHour}(${fragment}, ${hour})]`;\n  },\n\n  hourBefore(fragment: string, hour: number): string {\n    return `[${OPERATOR.dateHourBefore}(${fragment}, ${hour})]`;\n  },\n\n  hourAfter(fragment: string, hour: number): string {\n    return `[${OPERATOR.dateHourAfter}(${fragment}, ${hour})]`;\n  },\n};\n\nconst number = {\n  gt(fragment: string, value: number): string {\n    return `[${OPERATOR.numberGt}(${fragment}, ${value})]`;\n  },\n\n  lt(fragment: string, value: number): string {\n    return `[${OPERATOR.numberLt}(${fragment}, ${value})]`;\n  },\n\n  inRange(fragment: string, before: number, after: number): string {\n    return `[${OPERATOR.numberInRange}(${fragment}, ${before}, ${after})]`;\n  },\n};\n\nexport default {\n  at(fragment: string, value: PredicateValue | PredicateValue[]): string {\n    return `[${OPERATOR.at}(${fragment}, ${encode(value)})]`;\n  },\n  \n  not(fragment: string, value: PredicateValue | PredicateValue[]): string {\n    return `[${OPERATOR.not}(${fragment}, ${encode(value)})]`;\n  },\n\n  missing(fragment: string): string {\n    return `[${OPERATOR.missing}(${fragment})]`;\n  },\n\n  has(fragment: string): string {\n    return `[${OPERATOR.has}(${fragment})]`;\n  },\n\n  any(fragment: string, values: PredicateValue[]): string {\n    return `[${OPERATOR.any}(${fragment}, ${encode(values)})]`;\n  },\n\n  in(fragment: string, values: string[]): string {\n    return `[${OPERATOR.in}(${fragment}, ${encode(values)})]`;\n  },\n\n  fulltext(fragment: string, value: string): string {\n    return `[${OPERATOR.fulltext}(${fragment}, ${encode(value)})]`;\n  },\n\n  similar(documentId: string, maxResults: number): string {\n    return `[${OPERATOR.similar}(\"${documentId}\", ${maxResults})]`;\n  },\n\n  date,\n\n  dateBefore: date.before,\n\n  dateAfter: date.after,\n\n  dateBetween: date.between,\n\n  dayOfMonth: date.dayOfMonth,\n\n  dayOfMonthAfter: date.dayOfMonthAfter,\n\n  dayOfMonthBefore: date.dayOfMonthBefore,\n\n  dayOfWeek: date.dayOfWeek,\n\n  dayOfWeekAfter: date.dayOfWeekAfter,\n\n  dayOfWeekBefore: date.dayOfWeekBefore,\n\n  month: date.month,\n\n  monthBefore: date.monthBefore,\n\n  monthAfter: date.monthAfter,\n\n  year: date.year,\n\n  hour: date.hour,\n\n  hourBefore: date.hourBefore,\n\n  hourAfter: date.hourAfter,\n\n  number,\n\n  gt: number.gt,\n\n  lt: number.lt,\n\n  inRange: number.inRange,\n\n  near: geopoint.near,\n\n  geopoint,\n};\n","export interface Cookie {\n  [key: string]: string;\n  value: string;\n}\n\n// Some portions of code from https://github.com/jshttp/cookie\n\nvar decode = decodeURIComponent;\n\nfunction tryDecode(str: string, decode: (str: string) => string) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n\nfunction parse(str: string, options?: any) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = <Cookie>{};\n  var opt = options || {};\n  var pairs = str.split(/; */);\n  var dec = opt.decode || decode;\n\n  pairs.forEach(function(pair) {\n    var eq_idx = pair.indexOf('=');\n\n    // skip things that don't look like key=value\n    if (eq_idx < 0) {\n      return;\n    }\n\n    var key = pair.substr(0, eq_idx).trim();\n    var val = pair.substr(++eq_idx, pair.length).trim();\n\n    // quoted values\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n\n    // only assign once\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  });\n\n  return obj;\n}\n\nexport default { parse };\n","import { Document } from \"./documents\";\nimport { RequestHandler, RequestCallback } from './request';\nimport { ApiCache } from './cache';\nimport { Experiment, Experiments } from './experiments';\nimport { SearchForm, Form } from './form';\nimport Predicates from './Predicates';\nimport Cookies from './Cookies';\nimport ApiSearchResponse from './ApiSearchResponse';\nimport HttpClient from './HttpClient';\nimport { Client } from './client';\n\nexport const PREVIEW_COOKIE = 'io.prismic.preview';\nexport const EXPERIMENT_COOKIE = 'io.prismic.experiment';\n\nexport interface Ref {\n  ref: string;\n  label: string;\n  isMasterRef: string;\n  scheduledAt: string;\n  id: string;\n}\n\nexport interface ApiData {\n  refs: Ref[];\n  bookmarks: { [key: string]: string };\n  types: { [key: string]: string };\n  tags: string[];\n  forms: { [key: string]: Form };\n  experiments: any;\n  oauth_initiate: string;\n  oauth_token: string;\n  version: string;\n  licence: string;\n}\n\nexport interface PreviewResponse {\n  mainDocument?: string;\n}\n\nexport interface QueryOptions {\n  [key: string]: string | number | string[];\n}\n\nexport interface ResolvedApiOptions {\n  req?: any;\n}\n\nexport default class ResolvedApi implements Client {\n  data: ApiData;\n  masterRef: Ref;\n  experiments: Experiments;\n  options: ResolvedApiOptions;\n  httpClient: HttpClient;\n  bookmarks: { [key: string]: string };\n  refs: Ref[];\n  tags: string[];\n  types: { [key: string]: string };\n\n  constructor(data: ApiData, httpClient: HttpClient, options: ResolvedApiOptions) {\n    this.data = data;\n    this.masterRef = data.refs.filter(ref => ref.isMasterRef)[0];\n    this.experiments = new Experiments(data.experiments);\n    this.bookmarks = data.bookmarks;\n    this.httpClient = httpClient;\n    this.options = options;\n    this.refs = data.refs;\n    this.tags = data.tags;\n    this.types = data.types;\n  }\n\n  /**\n   * Returns a useable form from its id, as described in the RESTful description of the API.\n   * For instance: api.form(\"everything\") works on every repository (as \"everything\" exists by default)\n   * You can then chain the calls: api.form(\"everything\").query('[[:d = at(document.id, \"UkL0gMuvzYUANCpf\")]]').ref(ref).submit()\n   */\n  form(formId: string): SearchForm | null {\n    const form = this.data.forms[formId];\n    if (form) {\n      return new SearchForm(form, this.httpClient);\n    }\n    return null;\n  }\n\n  everything(): SearchForm {\n    const f = this.form('everything');\n    if (!f) throw new Error('Missing everything form');\n    return f;\n  }\n\n  /**\n   * The ID of the master ref on this prismic.io API.\n   * Do not use like this: searchForm.ref(api.master()).\n   * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n   */\n  master(): string {\n    return this.masterRef.ref;\n  }\n\n  /**\n   * Returns the ref ID for a given ref's label.\n   * Do not use like this: searchForm.ref(api.ref(\"Future release label\")).\n   * Instead, set your ref once in a variable, and call it when you need it; this will allow to change the ref you're viewing easily for your entire page.\n   */\n  ref(label: string): string | null {\n    const ref = this.data.refs.filter(ref => ref.label === label)[0];\n    return ref ? ref.ref : null;\n  }\n\n  currentExperiment(): Experiment | null {\n    return this.experiments.current();\n  }\n\n  /**\n   * Query the repository\n   */\n  query(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<ApiSearchResponse>, cb: RequestCallback<ApiSearchResponse> = () => {}): Promise<ApiSearchResponse> {\n    const { options, callback } = typeof optionsOrCallback === 'function'\n        ? { options: {} as QueryOptions, callback: optionsOrCallback }\n    : { options: optionsOrCallback || {}, callback: cb };\n\n    let form = this.everything();\n    for (const key in options) {\n      form = form.set(key, options[key]);\n    }\n    if (!options.ref) {\n      // Look in cookies if we have a ref (preview or experiment)\n      let cookieString = '';\n      if (this.options.req) { // NodeJS\n        cookieString = this.options.req.headers['cookie'] || '';\n      } else if (typeof window !== 'undefined' && window.document) { // Browser\n        cookieString = window.document.cookie || '';\n      }\n      const cookies = Cookies.parse(cookieString);\n      const previewRef = cookies[PREVIEW_COOKIE];\n      const experimentRef = this.experiments.refFromCookie(cookies[EXPERIMENT_COOKIE]);\n      form = form.ref(previewRef || experimentRef || this.masterRef.ref);\n    }\n    if (q) {\n      form.query(q);\n    }\n    return form.submit(callback);\n  }\n\n  /**\n   * Retrieve the document returned by the given query\n   * @param {string|array|Predicate} the query\n   * @param {object} additional parameters. In NodeJS, pass the request as 'req'.\n   * @param {function} callback(err, doc)\n   */\n  queryFirst(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<Document>, cb?: RequestCallback<Document>): Promise<Document> {\n    const { options, callback } = typeof optionsOrCallback === 'function'\n        ? { options: {} as QueryOptions, callback: optionsOrCallback }\n        : { options: optionsOrCallback || {}, callback: cb || (() => {}) };\n\n    options.page = 1;\n    options.pageSize = 1;\n\n    return this.query(q, options).then((response) => {\n      const document = response && response.results && response.results[0];\n      callback(null, document);\n      return document;\n    }).catch((error) => {\n      callback(error);\n      throw error;\n    });\n  }\n\n  /**\n   * Retrieve the document with the given id\n   */\n  getByID(id: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const options = maybeOptions || {};\n    if (!options.lang) options.lang = '*';\n    return this.queryFirst(Predicates.at('document.id', id), options, cb);\n  }\n\n  /**\n   * Retrieve multiple documents from an array of id\n   */\n  getByIDs(ids: string[], maybeOptions?: QueryOptions, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    const options = maybeOptions || {};\n    if (!options.lang) options.lang = '*';\n    return this.query(Predicates.in('document.id', ids), options, cb);\n  }\n\n  /**\n   * Retrieve the document with the given uid\n   */\n  getByUID(type: string, uid: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const options = maybeOptions || {};\n    if (!options.lang) options.lang = '*';\n    return this.queryFirst(Predicates.at(`my.${type}.uid`, uid), options, cb);\n  }\n\n  /**\n   * Retrieve the singleton document with the given type\n   */\n  getSingle(type: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const options = maybeOptions || {};\n    return this.queryFirst(Predicates.at('document.type', type), options, cb);\n  }\n\n  /**\n   * Retrieve the document with the given bookmark\n   */\n  getBookmark(bookmark: string, maybeOptions?: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    const id = this.data.bookmarks[bookmark];\n    if (id) {\n      return this.getByID(id, maybeOptions, cb);\n    } else {\n      return Promise.reject('Error retrieving bookmarked id');\n    }\n  }\n\n  previewSession(token: string, linkResolver: (doc: any) => string, defaultUrl: string, cb?: RequestCallback<string>): Promise<string> {\n    return this.httpClient.request<PreviewResponse>(token).then((result) => {\n      if (!result.mainDocument) {\n        cb && cb(null, defaultUrl);\n        return Promise.resolve(defaultUrl);\n      } else {\n        return this.getByID(result.mainDocument, { ref: token }).then((document) => {\n          if (!document) {\n            cb && cb(null, defaultUrl);\n            return defaultUrl;\n          } else {\n            const url = linkResolver(document);\n            cb && cb(null, url);\n            return url;\n          }\n        });\n      }\n    }).catch((error) => {\n      cb && cb(error);\n      throw error;\n    });\n  }\n}\n","export class Variation {\n  data: any = {};\n\n  constructor(data: any) {\n    this.data = data;\n  }\n\n  id(): string {\n    return this.data.id;\n  }\n\n  ref(): string {\n    return this.data.ref;\n  }\n\n  label(): string {\n    return this.data.label;\n  }\n}\n\nexport class Experiment {\n  variations: Variation[];\n  data: any = {};\n\n  constructor(data: any) {\n    this.data = data;\n    this.variations = (data.variations || []).map((v: any) => {\n      return new Variation(v);\n    });\n  }\n\n  id(): string {\n    return this.data.id;\n  }\n\n  googleId(): string {\n    return this.data.googleId;\n  }\n\n  name(): string {\n    return this.data.name;\n  }\n}\n\nexport class Experiments {\n  drafts: Experiment[];\n  running: Experiment[];\n\n  constructor(data: any) {\n    if (data) {\n      this.drafts = (data.drafts || []).map((exp: any) => {\n        return new Experiment(exp);\n      });\n      this.running = (data.running || []).map((exp: any) => {\n        return new Experiment(exp);\n      });\n    }\n  }\n\n  current(): Experiment | null {\n    if (this.running.length > 0) {\n      return this.running[0];\n    } else {\n      return null;\n    }\n  }\n  refFromCookie(cookie: string): string | null {\n    if (!cookie || cookie.trim() === '') return null;\n    const splitted = cookie.trim().split(' ');\n    if (splitted.length < 2) return null;\n    const expId = splitted[0];\n    const varIndex = parseInt(splitted[1], 10);\n    const exp = this.running.filter((exp) => {\n      return exp.googleId() === expId && exp.variations.length > varIndex;\n    })[0];\n    return exp ? exp.variations[varIndex].ref() : null;\n  }\n}\n","/**\n* A doubly linked list-based Least Recently Used (LRU) cache. Will keep most\n* recently used items while discarding least recently used items when its limit\n* is reached.\n*\n* Licensed under MIT. Copyright (c) 2010 Rasmus Andersson <http://hunch.se/>\n* Typescript-ified by Oleksandr Nikitin <https://tvori.info>\n*\n* Illustration of the design:\n*\n*       entry             entry             entry             entry\n*       ______            ______            ______            ______\n*      | head |.newer => |      |.newer => |      |.newer => | tail |\n*      |  A   |          |  B   |          |  C   |          |  D   |\n*      |______| <= older.|______| <= older.|______| <= older.|______|\n*\n*  removed  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  <--  added\n*/\n\nexport function MakeLRUCache(limit: number): ILRUCache {\n    return new (<any>LRUCache)(limit);\n}\n\nexport interface ILRUCache {\n    put(key: string, value: any): void;\n    get(key: string, Entry: boolean): any;\n    remove(key: String): void;\n    removeAll(): void;\n}\n\nfunction LRUCache(limit: number) {\n    // Current size of the cache. (Read-only).\n    this.size = 0;\n    // Maximum number of items this cache can hold.\n    this.limit = limit;\n    this._keymap = {};\n}\n\ninterface IEntry {\n    newer?: IEntry;\n    older?: IEntry;\n    key: string;\n    value: any;\n}\n\n/**\n * Put <value> into the cache associated with <key>. Returns the entry which was\n * removed to make room for the new entry. Otherwise undefined is returned\n * (i.e. if there was enough room already).\n */\nLRUCache.prototype.put = function (key: string, value: any) {\n    var entry: IEntry = { key: key, value: value };\n    // Note: No protection agains replacing, and thus orphan entries. By design.\n    this._keymap[key] = entry;\n    if (this.tail) {\n        // link previous tail to the new tail (entry)\n        this.tail.newer = entry;\n        entry.older = this.tail;\n    } else {\n        // we're first in -- yay\n        this.head = entry;\n    }\n    // add new entry to the end of the linked list -- it's now the freshest entry.\n    this.tail = entry;\n    if (this.size === this.limit) {\n        // we hit the limit -- remove the head\n        return this.shift();\n    } else {\n        // increase the size counter\n        this.size++;\n    }\n};\n\n/**\n * Purge the least recently used (oldest) entry from the cache. Returns the\n * removed entry or undefined if the cache was empty.\n *\n * If you need to perform any form of finalization of purged items, this is a\n * good place to do it. Simply override/replace this function:\n *\n *   var c = new LRUCache(123);\n *   c.shift = function() {\n *     var entry = LRUCache.prototype.shift.call(this);\n *     doSomethingWith(entry);\n *     return entry;\n *   }\n */\nLRUCache.prototype.shift = function () {\n    // todo: handle special case when limit == 1\n    var entry = this.head;\n    if (entry) {\n        if (this.head.newer) {\n            this.head = this.head.newer;\n            this.head.older = undefined;\n        } else {\n            this.head = undefined;\n        }\n        // Remove last strong reference to <entry> and remove links from the purged\n        // entry being returned:\n        entry.newer = entry.older = undefined;\n        // delete is slow, but we need to do this to avoid uncontrollable growth:\n        delete this._keymap[entry.key];\n    }\n    console.log('purging ', entry.key);\n    return entry;\n};\n\n/**\n * Get and register recent use of <key>. Returns the value associated with <key>\n * or undefined if not in cache.\n */\nLRUCache.prototype.get = function (key: string, returnEntry: boolean): any {\n    // First, find our cache entry\n    var entry = this._keymap[key];\n    if (entry === undefined) return; // Not cached. Sorry.\n    // As <key> was found in the cache, register it as being requested recently\n    if (entry === this.tail) {\n        // Already the most recently used entry, so no need to update the list\n        return returnEntry ? entry : entry.value;\n    }\n    // HEAD--------------TAIL\n    //   <.older   .newer>\n    //  <--- add direction --\n    //   A  B  C  <D>  E\n    if (entry.newer) {\n        if (entry === this.head)\n            this.head = entry.newer;\n        entry.newer.older = entry.older; // C <-- E.\n    }\n    if (entry.older)\n        entry.older.newer = entry.newer; // C. --> E\n    entry.newer = undefined; // D --x\n    entry.older = this.tail; // D. --> E\n    if (this.tail)\n        this.tail.newer = entry; // E. <-- D\n    this.tail = entry;\n    return returnEntry ? entry : entry.value;\n};\n\n// ----------------------------------------------------------------------------\n// Following code is optional and can be removed without breaking the core\n// functionality.\n\n/**\n * Check if <key> is in the cache without registering recent use. Feasible if\n * you do not want to chage the state of the cache, but only \"peek\" at it.\n * Returns the entry associated with <key> if found, or undefined if not found.\n */\nLRUCache.prototype.find = function (key: string) {\n    return this._keymap[key];\n};\n\n/**\n * Update the value of entry with <key>. Returns the old value, or undefined if\n * entry was not in the cache.\n */\nLRUCache.prototype.set = function (key: string, value: any) {\n    var oldvalue: any;\n    var entry = this.get(key, true);\n    if (entry) {\n        oldvalue = entry.value;\n        entry.value = value;\n    } else {\n        oldvalue = this.put(key, value);\n        if (oldvalue) oldvalue = oldvalue.value;\n    }\n    return oldvalue;\n};\n\n/**\n * Remove entry <key> from cache and return its value. Returns undefined if not\n * found.\n */\nLRUCache.prototype.remove = function (key: string) {\n    var entry = this._keymap[key];\n    if (!entry) return;\n    delete this._keymap[entry.key]; // need to do delete unfortunately\n    if (entry.newer && entry.older) {\n        // relink the older entry with the newer entry\n        entry.older.newer = entry.newer;\n        entry.newer.older = entry.older;\n    } else if (entry.newer) {\n        // remove the link to us\n        entry.newer.older = undefined;\n        // link the newer entry to head\n        this.head = entry.newer;\n    } else if (entry.older) {\n        // remove the link to us\n        entry.older.newer = undefined;\n        // link the newer entry to head\n        this.tail = entry.older;\n    } else {// if(entry.older === undefined && entry.newer === undefined) {\n        this.head = this.tail = undefined;\n    }\n\n    this.size--;\n    return entry.value;\n};\n\n/** Removes all entries */\nLRUCache.prototype.removeAll = function () {\n    // This should be safe, as we never expose strong refrences to the outside\n    this.head = this.tail = undefined;\n    this.size = 0;\n    this._keymap = {};\n};\n\n/**\n * Return an array containing all keys of entries stored in the cache object, in\n * arbitrary order.\n */\nif (typeof Object.keys === 'function') {\n    LRUCache.prototype.keys = function () { return Object.keys(this._keymap); };\n} else {\n    LRUCache.prototype.keys = function () {\n        var keys: string[] = [];\n        for (var k in this._keymap) keys.push(k);\n        return keys;\n    };\n}\n\n/**\n * Call `fun` for each entry. Starting with the newest entry if `desc` is a true\n * value, otherwise starts with the oldest (head) enrty and moves towards the\n * tail.\n *\n * `fun` is called with 3 arguments in the context `context`:\n *   `fun.call(context, Object key, Object value, LRUCache self)`\n */\nLRUCache.prototype.forEach = function (fun: Function, context: any, desc: boolean) {\n    var entry: IEntry | undefined;\n    if (context === true) { desc = true; context = undefined; }\n    else if (typeof context !== 'object') context = this;\n    if (desc) {\n        entry = this.tail;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.older;\n        }\n    } else {\n        entry = this.head;\n        while (entry) {\n            fun.call(context, entry.key, entry.value, this);\n            entry = entry.newer;\n        }\n    }\n};\n\n/** Returns a JSON (array) representation */\n//LRUCache.prototype.toJSON = function () {\n//    var s: IEntry[] = [], entry = this.head;\n//    while (entry) {\n//        s.push({ key: entry.key.toJSON(), value: entry.value.toJSON() });\n//        entry = entry.newer;\n//    }\n//    return s;\n//};\n\n/** Returns a String representation */\nLRUCache.prototype.toString = function () {\n    var s = '', entry = this.head;\n    while (entry) {\n        s += String(entry.key) + ':' + entry.value;\n        entry = entry.newer;\n        if (entry)\n            s += ' < ';\n    }\n    return s;\n};\n\n// Export ourselves\n//if (typeof this === 'object') this.LRUCache = LRUCache;","import { ILRUCache, MakeLRUCache } from './lru';\n\nexport interface ApiCache {\n  isExpired(key: String): boolean;\n  get<T>(key: string, cb: (error: Error | null, entry?: T) => void): void;\n  set<T>(key: string, value: T, ttl: number, cb?: (error: Error | null) => void): void;\n  remove(key: string, cb?: (error: Error | null) => void): void;\n  clear(cb?: (error: Error | null) => void): void;\n}\n\nexport class DefaultApiCache implements ApiCache {\n  lru: ILRUCache;\n\n  constructor(limit: number = 1000) {\n    this.lru = MakeLRUCache(limit);\n  }\n\n  isExpired(key: string): boolean {\n    const value = this.lru.get(key, false);\n    if (value) {\n      return value.expiredIn !== 0 && value.expiredIn < Date.now();\n    } else {\n      return false;\n    }\n  }\n\n  get<T>(key: string, cb: (error: Error | null, entry?: T) => void): void {\n    const value = this.lru.get(key, false);\n    if (value && !this.isExpired(key)) {\n      cb(null, value.data);\n    } else {\n      cb && cb(null);\n    }\n  }\n\n  set<T>(key: string, value: T, ttl: number, cb?: (error: Error | null) => void): void {\n    this.lru.remove(key);\n    this.lru.put(key, {\n      data: value,\n      expiredIn: ttl ? (Date.now() + (ttl * 1000)) : 0,\n    });\n    cb && cb(null);\n  }\n\n  remove(key: string, cb?: (error: Error | null) => void): void {\n    this.lru.remove(key);\n    cb && cb(null);\n  }\n\n  clear(cb?: (error: Error | null) => void): void {\n    this.lru.removeAll();\n    cb && cb(null);\n  }\n}\n","// In the browser, node-fetch exports self.fetch:\n// https://github.com/bitinn/node-fetch/blob/master/browser.js\nimport fetches, { RequestInit } from 'node-fetch';\n\n// Number of maximum simultaneous connections to the prismic server\nconst MAX_CONNECTIONS: number = 20;\n// Number of requests currently running (capped by MAX_CONNECTIONS)\nlet running: number = 0;\n\ninterface Task {\n  url: string;\n  callback: RequestCallback<any>;\n}\n\n// Requests in queue\nconst queue: Task[] = [];\n\ninterface NodeRequestInit extends RequestInit {\n  agent?: any;\n}\n\nfunction fetchRequest<T>(url: string, options: RequestHandlerOption, callback: RequestCallback<T>): void {\n\n  const fetchOptions = {\n    headers: {\n      Accept: 'application/json',\n    },\n  } as NodeRequestInit;\n\n  if (options && options.proxyAgent) {\n    fetchOptions.agent = options.proxyAgent;\n  }\n\n  fetches(url, fetchOptions).then((xhr) => {\n    if (~~(xhr.status / 100 !== 2)) {\n        /**\n         * @description\n         * drain the xhr before throwing an error to prevent memory leaks\n         * @link https://github.com/bitinn/node-fetch/issues/83\n         */\n      return xhr.text().then(() => {\n        const e: any = new Error(`Unexpected status code [${xhr.status}] on URL ${url}`);\n        e.status = xhr.status;\n        throw e;\n      });\n    } else {\n      return xhr.json().then((result) => {\n        const cacheControl = xhr.headers.get('cache-control');\n        const parsedCacheControl = cacheControl ? /max-age=(\\d+)/.exec(cacheControl) : null;\n        const ttl = parsedCacheControl ? parseInt(parsedCacheControl[1], 10) : undefined;\n        callback(null, result, xhr, ttl);\n      });\n    }\n  }).catch(callback);\n}\n\nfunction processQueue(options: RequestHandlerOption): void {\n  if (queue.length > 0 && running < MAX_CONNECTIONS) {\n    running++;\n\n    const req = queue.shift();\n\n    if (req) {\n\n      fetchRequest(req.url, options, (error, result, xhr, ttl) => {\n        running--;\n        req.callback(error, result, xhr, ttl);\n        processQueue(options);\n      });\n    }\n  }\n}\n\nexport type RequestCallback<T> = (error: Error | null, result?: T | null, xhr?: any, ttl?: number) => void;\n\nexport interface RequestHandlerOption {\n  proxyAgent?: any;\n}\n\nexport interface RequestHandler {\n  request<T>(url: string, cb: RequestCallback<T>): void;\n}\n\nexport class DefaultRequestHandler implements RequestHandler {\n\n  options: RequestHandlerOption;\n\n  constructor(options?: RequestHandlerOption) {\n    this.options = options || {};\n  }\n\n  request<T>(url: string, callback: RequestCallback<T>): void {\n    queue.push({ url, callback });\n    processQueue(this.options);\n  }\n}\n","import { ApiCache, DefaultApiCache } from './cache';\nimport { RequestHandler, DefaultRequestHandler, RequestCallback } from './request';\n\nexport interface HttpClientOptions {\n  ttl?: number;\n  cacheKey?: string;\n}\n\nexport default class HttpClient {\n\n  private cache: ApiCache;\n  private requestHandler: RequestHandler;\n\n  constructor(requestHandler?: RequestHandler, cache?: ApiCache, proxyAgent?: any) {\n    this.requestHandler = requestHandler || new DefaultRequestHandler({ proxyAgent });\n    this.cache = cache || new DefaultApiCache();\n  }\n\n  request<T>(url: string, callback?: RequestCallback<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n      this.requestHandler.request<T>(url, (err, result, xhr, ttl) => {\n        if (err) {\n          reject(err);\n          callback && callback(err, null, xhr, ttl);\n        } else if (result) {\n          resolve(result);\n          callback && callback(null, result, xhr, ttl);\n        }\n      });\n    });\n  }\n\n  /**\n   * Fetch a URL corresponding to a query, and parse the response as a Response object\n   */\n  cachedRequest<T>(url: string, maybeOptions?: HttpClientOptions): Promise<T> {\n    const options = maybeOptions || {};\n    const run = (cb: RequestCallback<T>) => {\n      const cacheKey = options.cacheKey || url;\n      this.cache.get<T>(cacheKey, (cacheGetError, cacheGetValue) => {\n        if (cacheGetError || cacheGetValue) {\n          cb(cacheGetError, cacheGetValue);\n        } else {\n          this.request<T>(url, (fetchError, fetchValue, xhr, ttlReq) => {\n            if (fetchError) {\n              cb(fetchError, null);\n            } else {\n              const ttl = ttlReq || options.ttl;\n              if (ttl) {\n                this.cache.set(cacheKey, fetchValue, ttl, cb);\n              }\n              cb(null, fetchValue);\n            }\n          });\n        }\n      });\n    };\n\n    return new Promise((resolve, reject) => {\n      run((err, value) => {\n        if (err) reject(err);\n        if (value) resolve(value);\n      });\n    });\n  }\n}\n","import Predicates from './Predicates';\nimport { RequestHandler, RequestCallback } from './request';\nimport { Document } from './documents';\nimport { ApiCache } from './cache';\nimport ResolvedApi, { ApiData } from './ResolvedApi';\nimport HttpClient from './HttpClient';\n\nexport interface ApiOptions {\n  accessToken?: string;\n  requestHandler?: RequestHandler;\n  req?: any;\n  apiCache?: ApiCache;\n  apiDataTTL?: number;\n  proxyAgent?: any;\n}\n\nexport default class Api {\n  url: string;\n  options: ApiOptions;\n  apiDataTTL: number;\n  httpClient: HttpClient;\n\n  constructor(url: string, options?: ApiOptions) {\n    this.options = options || {};\n    this.url = url;\n    if (this.options.accessToken) {\n      const accessTokenParam = `access_token=${this.options.accessToken}`;\n      this.url += (url.indexOf('?') > -1 ? '&' : '?') + accessTokenParam;\n    }\n    this.apiDataTTL = this.options.apiDataTTL || 5;\n    this.httpClient = new HttpClient(\n      this.options.requestHandler,\n      this.options.apiCache,\n      this.options.proxyAgent,\n    );\n  }\n\n  /**\n   * Fetches data used to construct the api client, from cache if it's\n   * present, otherwise from calling the prismic api endpoint (which is\n   * then cached).\n   */\n  get(cb?: RequestCallback<ResolvedApi>): Promise<ResolvedApi> {\n    return this.httpClient.cachedRequest<ApiData>(this.url, { ttl: this.apiDataTTL }).then((data) => {\n      const resolvedApi = new ResolvedApi(data, this.httpClient, this.options);\n      cb && cb(null, resolvedApi);\n      return resolvedApi;\n    }).catch((error) => {\n      cb && cb(error);\n      throw error;\n    });\n  }\n}\n","import { Document } from \"./documents\";\nimport ResolvedApi, { QueryOptions, EXPERIMENT_COOKIE, PREVIEW_COOKIE } from './ResolvedApi';\nimport ApiSearchResponse from './ApiSearchResponse';\nimport { SearchForm, LazySearchForm } from './form';\nimport { Experiment } from './experiments';\nimport { RequestHandler, RequestCallback } from './request';\nimport Api, { ApiOptions } from './Api';\n\nexport interface Client {\n  query(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<ApiSearchResponse>, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse>;\n  queryFirst(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<Document>, cb: RequestCallback<Document>): Promise<Document>;\n  getByID(id: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  getByIDs(ids: string[], options: QueryOptions, cb: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse>;\n  getByUID(type: string, uid: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  getSingle(type: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  getBookmark(bookmark: string, options: QueryOptions, cb: RequestCallback<Document>): Promise<Document>;\n  previewSession(token: string, linkResolver: (doc: any) => string, defaultUrl: string, cb?: RequestCallback<string>): Promise<string>;\n}\n\nexport class DefaultClient implements Client {\n\n  api: Api;\n  resolvedApi: ResolvedApi;\n\n  constructor(url: string, options?: ApiOptions) {\n    this.api = new Api(url, options);\n  }\n\n  getApi(): Promise<ResolvedApi> {\n    return this.api.get();\n  }\n\n  everything(): LazySearchForm {\n    return this.form('everything');\n  }\n\n  form(formId: string): LazySearchForm {\n    return new LazySearchForm(formId, this.api);\n  }\n\n  query(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<ApiSearchResponse>, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.getApi().then(api => api.query(q, optionsOrCallback, cb));\n  }\n\n  queryFirst(q: string | string[], optionsOrCallback: QueryOptions | RequestCallback<Document>, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.queryFirst(q, optionsOrCallback, cb));\n  }\n\n  getByID(id: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getByID(id, options, cb));\n  }\n\n  getByIDs(ids: string[], options: QueryOptions, cb?: RequestCallback<ApiSearchResponse>): Promise<ApiSearchResponse> {\n    return this.getApi().then(api => api.getByIDs(ids, options, cb));\n  }\n\n  getByUID(type: string, uid: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getByUID(type, uid, options, cb));\n  }\n\n  getSingle(type: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getSingle(type, options, cb));\n  }\n\n  getBookmark(bookmark: string, options: QueryOptions, cb?: RequestCallback<Document>): Promise<Document> {\n    return this.getApi().then(api => api.getBookmark(bookmark, options, cb));\n  }\n\n  previewSession(token: string, linkResolver: (doc: any) => string, defaultUrl: string, cb?: RequestCallback<string>): Promise<string> {\n    return this.getApi().then(api => api.previewSession(token, linkResolver, defaultUrl, cb));\n  }\n\n  static getApi(url: string, options?: ApiOptions): Promise<ResolvedApi> {\n    const api = new Api(url, options);\n    return api.get();\n  }\n}\n","import ResolvedApi, { EXPERIMENT_COOKIE as experimentCookie, PREVIEW_COOKIE as previewCookie } from './ResolvedApi';\nimport Predicates from './Predicates';\nimport { Experiments } from './Experiments';\nimport Api, { ApiOptions } from './Api';\nimport { DefaultClient } from './client';\n\nexport {\n  experimentCookie,\n  previewCookie,\n  Predicates,\n  Experiments,\n  Api\n};\n\nexport function client(url: string, options?: ApiOptions) {\n  return new DefaultClient(url, options);\n}\n\nexport function getApi(url: string, options?: ApiOptions): Promise<ResolvedApi> {\n  return DefaultClient.getApi(url, options);\n}\n\nexport function api(url: string, options?: ApiOptions): Promise<ResolvedApi> {\n  return getApi(url, options);\n}"],"names":["Variation","Experiment","Experiments"],"mappings":"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"}